<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vende Tu Auto - Registro</title>
    <link rel="icon" type="image/png" href="{% static 'img/logo_web.png' %}" />
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <script src="{% static 'js/bootstrap.bundle.js' %}"></script>
    <script src="{% static 'js/sweetalert2.js' %}"></script>
    
    <style>
        html, body {
          margin: 0;
          padding: 0;
          height: 100vh;
          width: 100%;
          overflow-x: hidden;
        }
        body {
          background: url("{% static 'img/fondo_pagina.jpg' %}") no-repeat center center fixed;
          background-size: cover;
          position: relative;
          min-height: 100vh;
        }
        body::before {
          content: "";
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.5);
          z-index: -1;
        }
        /* Estilos para que los errores del formulario sean legibles */
        .form-error {
            color: #E74C3C; /* Rojo */
            font-size: 0.9em;
            list-style: none;
            padding-left: 0.25rem;
            margin-top: 0.25rem;
        }
        /* Corregimos la ayuda de la contraseña */
        #id_password1_helptext {
            color: #6c757d;
            font-size: 0.8em;
            padding-left: 0.25rem;
        }
    </style>
</head>

<body>
    {% if messages %}
    {% for msj in messages %}
        <script>
            Swal.fire('{{ msj }}','','{{ msj.tags }}')
        </script>    
    {% endfor %}
    {% endif %}

    <section class="py-3 py-md-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-12 col-sm-10 col-md-8 col-lg-6 col-xl-5 col-xxl-4">
                    <div class="card border border-light-subtle rounded-3 shadow-sm" style="background: rgba(255, 255, 255, 0.9);">
                        <div class="card-body p-3 p-md-4 p-xl-5">
                            <div class="text-center mb-3">
                                <a href="{% url 'inicio' %}">
                                    <img src="{% static 'img/logo_web.png' %}" alt="Logo" width="175"
                                        height="175">
                                </a>
                            </div>
                            <h2 class="fs-6 fw-normal text-center text-secondary mb-4">{{ titulo }}</h2>
                            
                            <form method="post">
                                {% csrf_token %}
                                
                                {% if form.non_field_errors %}
                                    <div class-"alert alert-danger">
                                        {% for error in form.non_field_errors %}
                                            <p>{{ error }}</p>
                                        {% endfor %}
                                    </div>
                                {% endif %}

                                <div class="form-floating mb-3">
                                    {{ form.username }}
                                    <label for="id_username">Nombre de Usuario</label>
                                </div>
                                {% if form.username.errors %}
                                    <ul class="form-error">
                                    {% for error in form.username.errors %}
                                        <li>{{ error }}</li>
                                    {% endfor %}
                                    </ul>
                                {% endif %}

                                <div class="form-floating mb-3">
                                    {{ form.password1 }}
                                    <label for="id_password1">Contraseña</label>
                                </div>
                                {% if form.password1.errors %}
                                    <ul class="form-error">
                                    {% for error in form.password1.errors %}
                                        <li>{{ error }}</li>
                                    {% endfor %}
                                    </ul>
                                {% endif %}
                                <div id="id_password1_helptext" class="form-text mb-2">
                                    {{ form.password1.help_text }}
                                </div>


                                <div class="form-floating mb-3">
                                    {{ form.password2 }}
                                    <label for="id_password2">Confirmar Contraseña</label>
                                </div>
                                {% if form.password2.errors %}
                                    <ul class="form-error">
                                    {% for error in form.password2.errors %}
                                        <li>{{ error }}</li>
                                    {% endfor %}
                                    </ul>
                                {% endif %}
                                <div class="d-grid my-3">
                                    <button class="btn btn-primary btn-lg" type="submit">Registrarse</button>
                                </div>

                                <div class="text-center">
                                    <p>¿Ya tienes una cuenta? <a href="{% url 'login' %}">Inicia sesión</a></p>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        document.getElementById('id_username').classList.add('form-control');
        document.getElementById('id_username').setAttribute('placeholder','Nombre de Usuario');
        
        document.getElementById('id_password1').classList.add('form-control');
        document.getElementById('id_password1').setAttribute('placeholder','Contraseña');
        
        document.getElementById('id_password2').classList.add('form-control');
        document.getElementById('id_password2').setAttribute('placeholder','Confirmar Contraseña');
    </script>
</body>
</html>